<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
<title>ì»¤í”¼ëŠ” SSDA í‚¤ì˜¤ìŠ¤í¬</title>

<style>
  /* ---------------- ê¸°ë³¸ ì„¤ì • ---------------- */
  body {
    font-family: 'Pretendard', sans-serif;
    text-align: center;
    user-select: none;
    background: #ffffff;
    margin: 0;
    overflow-x: hidden;
    padding-bottom: 120px;
  }

  /* ---------------- ì„±ê³µ í™”ë©´ (ê°€ì¥ ìœ„ì— ëœ¸) ---------------- */
  #successScreen {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: #e6ffea;
    z-index: 99999;
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
  }
 
  #successMessage {
    font-size: 40px;
    font-weight: 900;
    color: #2e7d32;
    margin-bottom: 20px;
    animation: popUp 0.5s ease-out;
  }

  @keyframes popUp {
    from { transform: scale(0.5); opacity: 0; }
    to { transform: scale(1); opacity: 1; }
  }

  /* ---------------- ê·¸ë¦¬ë“œ ë ˆì´ì•„ì›ƒ (6ì—´ ê³ ì •) ---------------- */
  #choices {
    margin: 20px auto;
    width: 98%;
    max-width: 1400px;
   
    display: grid;
    /* ëª¨ë°”ì¼/PC ìƒê´€ì—†ì´ ë¬´ì¡°ê±´ 6ì¹¸ */
    grid-template-columns: repeat(6, 1fr);
    gap: 4px;
  }

  /* ëª¨ë°”ì¼ìš© ìŠ¤íƒ€ì¼ (ì¢ì€ í™”ë©´ ëŒ€ì‘) */
  @media (max-width: 768px) {
    button.choice-btn {
      padding: 5px 2px !important;
      font-size: 11px !important;  
      min-height: 60px !important;
      letter-spacing: -1.5px;      
      line-height: 1.1;
    }

    #title { font-size: 20px !important; }
    #recipeBox { width: 95% !important; font-size: 14px !important; }
    #timer { font-size: 30px !important; }
    #successMessage { font-size: 30px; }
  }

  #title {
    font-size: 32px;
    font-weight: 800;
    margin-top: 20px;
    color: #333;
  }

  #mission {
    font-size: 14px;
    margin-bottom: 10px;
    color: #555;
  }

  #recipeBox {
    background: #eef7ff;
    padding: 15px;
    margin: 10px auto;
    width: 500px;
    border: 3px solid #91c4ff;
    border-radius: 15px;
    font-size: 20px;
    box-shadow: 0 6px 10px rgba(0,0,0,0.1);
  }

  #timer {
    font-size: 40px;
    color: #ff0000;
    font-weight: 900;
    margin: 15px;
  }

  .hidden { display: none !important; }

  /* ---------------- ì• ë‹ˆë©”ì´ì…˜ (ë¸”ëŸ¬ ì•½í•˜ê²Œ ìˆ˜ì •ë¨) ---------------- */
  .blurred {
    animation: blurPulse 2.2s infinite ease-in-out;
    filter: blur(2px); /* 4px -> 2px ë¡œ ì•½í™” */
  }

  @keyframes blurPulse {
    0%   { filter: blur(2px); }
    50%  { filter: blur(3px); } /* ìµœëŒ€ 3pxê¹Œì§€ë§Œ */
    100% { filter: blur(2px); }
  }

  .shake {
    animation: shake 0.4s infinite alternate;
  }
  @keyframes shake {
    from { transform: translateX(-2px); }
    to   { transform: translateX(2px); }
  }

  /* ---------------- ë²„íŠ¼ ë””ìì¸ ---------------- */
  button.choice-btn {
    font-size: 18px;
    font-weight: 800;
    width: 100%;
    min-height: 80px;
    border: none;
    border-radius: 8px;
    background: linear-gradient(180deg, #ffffff 0%, #f0f0f0 100%);
    box-shadow: 0 4px 0 #b1b1b1, 0 2px 4px rgba(0,0,0,0.1);
    color: #222;
    cursor: pointer;
    transition: transform 0.1s, box-shadow 0.1s;
    word-break: keep-all;
    display: flex;        
    align-items: center;
    justify-content: center;
  }

  button.choice-btn:active {
    transform: translateY(4px) !important;
    box-shadow: 0 0 0 #b1b1b1 inset;
  }

  #startBtn {
    font-size: 24px;
    font-weight: bold;
    padding: 15px 40px;
    cursor: pointer;
    background: #44aa55;
    color: white;
    border: none;
    border-radius: 15px;
    margin-top: 20px;
    box-shadow: 0 6px 0 #2a7a35;
  }
  #startBtn:active { margin-top: 26px; box-shadow: none; }

  /* ê¸°ë¶€ ë²„íŠ¼ ìŠ¤íƒ€ì¼ */
  .donation-container {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 10px;
    width: 95%;
    margin: 0 auto;
    max-width: 500px;
  }

  .donation-btn {
    border: none;
    border-radius: 10px;
    padding: 15px;
    width: 100%;
    font-size: 20px;
    cursor: pointer;
    color: #333;
    box-shadow: 0 4px 0 rgba(0,0,0,0.2);
    font-weight: bold;
    filter: none;
  }
  .donation-btn:active { transform: translateY(4px); box-shadow: none; }

  /* ê´‘ê³  íŒì—… (í•˜ë‹¨ ë°°ë„ˆ) */
  #adPopup {
    position: fixed;
    bottom: 0;
    left: 0;
    width: 100%;
    background: #ffec99;
    border-top: 4px solid #ff8800;
    padding: 12px 0;
    text-align: center;
    font-size: 14px;
    font-weight: bold;
    z-index: 9000;
    box-shadow: 0 -5px 15px rgba(0,0,0,0.2);
    display: flex;
    justify-content: center;
    align-items: center;
    gap: 10px;
  }

  /* ---------------- ì§„ì§œ ê²°ì œ ë²„íŠ¼ (ì¤‘ìš”) ---------------- */
  #finalRealPayBtn {
    position: fixed;
    bottom: 80px;
    right: 20px;
    transform: scale(0.75);
    opacity: 0.9;
    filter: blur(1px); /* 5px -> 3px ë¡œ ì•½í™” (ì˜ ë³´ì´ê²Œ) */
    background: #FFFFFF;
    color: #000;
    border: 2px solid #FFFFFF;
    padding: 10px 15px;
    font-size: 18px;
    font-weight: bold;
    z-index: 99999;
    border-radius: 8px;
    cursor: pointer;
    touch-action: manipulation;
    -webkit-tap-highlight-color: transparent;
  }

  /* â˜… PC(ë§ˆìš°ìŠ¤) í™˜ê²½ì—ì„œë§Œ ë„ë§ê°€ê³  íë ¤ì§€ê²Œ í•¨ (ëª¨ë°”ì¼ í„°ì¹˜ ì˜¤ë¥˜ í•´ê²°) â˜… */
  @media (hover: hover) {
    #finalRealPayBtn:hover {
      filter: blur(5px);
      transform: scale(0.7) translate(-10px, -10px);
    }
  }

</style>
</head>

<body>

<div id="title">ì»¤í”¼ëŠ” SSDA í‚¤ì˜¤ìŠ¤í¬<br><span style="color:red; font-size:0.8em;">HELL MODE</span></div>
<div id="mission">
ğŸ¯ <b>ë¯¸ì…˜</b>: ì œì‹œëœ ë ˆì‹œí”¼ë¥¼ 90ì´ˆ ì•ˆì— ì •í™•íˆ ì„ íƒí•˜ì‹œì˜¤.<br>
(í‹€ë¦¬ë©´ ì²˜ìŒìœ¼ë¡œ ëŒì•„ê°‘ë‹ˆë‹¤!)
</div>

<div id="recipeBox">
  <div style="margin-bottom:5px; color:#666; font-size:0.8em;">[ì˜¤ëŠ˜ì˜ ì£¼ë¬¸]</div>
  <div id="recipeText"></div>
</div>

<div id="timer">90</div>
<button id="startBtn">ì‹œì‘í•˜ê¸°</button>

<div id="kiosk" class="hidden">
  <h2 id="stepTitle" style="font-size:20px; margin:15px 0;"></h2>

  <div id="choices" class="blurred shake"></div>

  <div id="donationGroup" class="donation-container hidden">
    <button id="donationYesBtn" class="donation-btn shake" style="background:#ffb3b3; font-size: 24px;">â¤ï¸ ê¸°ë¶€í•˜ê¸°</button>
    <button id="donation1000" class="donation-btn shake" style="background:#ffe0e0;">1,000ì› ê¸°ë¶€</button>
    <button id="donation3000" class="donation-btn shake" style="background:#ffd1d1;">3,000ì› ê¸°ë¶€</button>
    <button id="donation10000" class="donation-btn shake" style="background:#ffb3b3;">10,000ì› ê¸°ë¶€</button>
  </div>
</div>

<div id="adPopup" class="hidden">
  <span>ğŸ“¢ <b>í• ì¸!</b> ê°€ì… ì‹œ <span style="color:red;">50%</span>â†“</span>
  <button id="adClose" style="
    background: red;
    color: white;
    border: none;
    border-radius: 5px;
    padding: 3px 8px;
    cursor: pointer;
    font-weight: bold;
    font-size: 12px;
  ">ë‹«ê¸°</button>
</div>

<button id="finalRealPayBtn" class="hidden">ì§„ì§œ ê²°ì œ</button>

<div id="successScreen" class="hidden">
  <div style="font-size:60px;">ğŸ‰</div>
  <div id="successMessage">ì£¼ë¬¸ ì„±ê³µ!</div>
  <div style="font-size:18px; margin-bottom:30px; color:#555;">
    ë§›ìˆëŠ” ìŒë£Œê°€ ê³§ ì¤€ë¹„ë©ë‹ˆë‹¤.
  </div>
  <button onclick="location.reload()"
    style="
      padding:15px 40px;
      font-size:20px;
      background:#44aa55;
      color:white;
      border:none;
      border-radius:10px;
      cursor:pointer;
      font-weight:bold;
      box-shadow: 0 5px 0 #2e7d32;
    ">
    ì²˜ìŒìœ¼ë¡œ ëŒì•„ê°€ê¸°
  </button>
</div>

<script>
/* -------------------- ë©”ë‰´ ë°ì´í„° -------------------- */
const drinkOptions = [
  "ì•„ë©”ë¦¬ì¹´ë…¸","ì¹´í˜ë¼ë–¼","ë°”ë‹ë¼ë¼ë–¼","ì¹´ë¼ë©œë§ˆë¼ì•„ë˜",
  "ì¹´í‘¸ì¹˜ë…¸","ì½œë“œë¸Œë£¨","ì¹´ë¼ë©œë¼ë–¼",
  "ì´ˆì½”ë¼ë–¼","ê³ êµ¬ë§ˆë¼ë–¼","ë…¹ì°¨ë¼ë–¼",
  "ì–¼ê·¸ë ˆì´í‹°","ìºëª¨ë§ˆì¼í‹°","í˜í¼ë¯¼íŠ¸í‹°",
  "ìœ ìì°¨","ë ˆëª¬í‹°","ìëª½í‹°","í™ì°¨","ë…¹ì°¨"
];
const hotIced = ["HOT", "ICE"];
const sizes = ["Small", "Medium", "Large", "Venti"];
const shot = ["Extra shot", "ìƒ· ì¶”ê°€ ì—†ìŒ"];
const iceAmount = ["ì–¼ìŒ ë§ì´", "ì–¼ìŒ ì ê²Œ"];
const sugar = ["ì„¤íƒ• ë§ì´", "ì„¤íƒ• ì ê²Œ"];
const dineType = ["ë¨¹ê³ ê°€ê¸°", "í…Œì´í¬ì•„ì›ƒ"];

/* -------------------- ì •ë‹µ ë ˆì‹œí”¼ ëœë¤ ìƒì„± -------------------- */
let recipe = {};
function generateRecipe() {
  recipe = {
    drink: drinkOptions[Math.floor(Math.random()*drinkOptions.length)],
    temp:  hotIced[Math.floor(Math.random()*hotIced.length)],
    size:  sizes[Math.floor(Math.random()*sizes.length)],
    shot:  shot[Math.floor(Math.random()*shot.length)],
    ice:   iceAmount[Math.floor(Math.random()*iceAmount.length)],
    sugar: sugar[Math.floor(Math.random()*sugar.length)],
    dine:  dineType[Math.floor(Math.random()*dineType.length)]
  };
  document.getElementById("recipeText").innerHTML = `
    <span style="font-size:1.2em; color:#0055ff; font-weight:bold;">${recipe.drink}</span><br>
    ${recipe.temp} / ${recipe.size} / ${recipe.shot}<br>
    ${recipe.ice} / ${recipe.sugar}<br>
    <b style="color:#d32f2f;">${recipe.dine}</b>
  `;
}

/* -------------------- ë‹¨ê³„ ì •ë³´ -------------------- */
let step = 1;
let time = 90;
let timerInterval;

const correct = {
  1: () => recipe.drink,
  2: () => recipe.temp,
  3: () => recipe.size,
  4: () => recipe.shot,
  5: () => recipe.ice,
  6: () => recipe.sugar,
  7: () => recipe.dine
};

const stepsText = {
  1: "1ë‹¨ê³„: ìŒë£Œ ì„ íƒ",
  2: "2ë‹¨ê³„: HOT / ICE",
  3: "3ë‹¨ê³„: ì‚¬ì´ì¦ˆ ì„ íƒ",
  4: "4ë‹¨ê³„: ìƒ· ì¶”ê°€ ì—¬ë¶€",
  5: "5ë‹¨ê³„: ì–¼ìŒì–‘ ì„ íƒ",
  6: "6ë‹¨ê³„: ì„¤íƒ• ì–‘ ì„ íƒ",
  7: "7ë‹¨ê³„: ë¨¹ê³ ê°€ê¸° / í…Œì´í¬ì•„ì›ƒ"
};

const stageButtons = {
  1: drinkOptions,
  2: hotIced,
  3: sizes,
  4: shot,
  5: iceAmount,
  6: sugar,
  7: dineType
};

function shuffle(array) {
  return array.sort(() => Math.random() - 0.5);
}

/* -------------------- ì´ˆê¸°í™” -------------------- */
function resetGame() {
  alert("âš  ì˜ëª» ì„ íƒí–ˆìŠµë‹ˆë‹¤! ì²˜ìŒ ë‹¨ê³„ë¡œ ëŒì•„ê°‘ë‹ˆë‹¤.");
  step = 1;

  document.getElementById("adPopup").classList.add("hidden");
  document.getElementById("donationGroup").classList.add("hidden");
  document.getElementById("finalRealPayBtn").classList.add("hidden");
  document.getElementById("successScreen").classList.add("hidden");
 
  document.getElementById("choices").classList.remove("hidden");
  document.getElementById("stepTitle").innerText = stepsText[1];
  document.getElementById("kiosk").style.filter = "";

  renderStep();
}

/* -------------------- ê´‘ê³  -------------------- */
function showAd() {
  const ad = document.getElementById("adPopup");
  ad.classList.remove("hidden");
 
  const close = document.getElementById("adClose");
  close.onclick = () => ad.classList.add("hidden");

  setTimeout(() => { if(Math.random() < 0.6) showAd(); }, 5000);
}

/* -------------------- ë¸”ëŸ¬ íš¨ê³¼ (ì•½í•˜ê²Œ ìˆ˜ì •ë¨) -------------------- */
function randomBlurShock() {
  const choices = document.getElementById("choices");
  if (!choices.classList.contains("hidden")) {
    // ë¸”ëŸ¬ ê°•ë„: ê¸°ì¡´ 4~9px -> 2~5pxë¡œ ì•½í™”
    let randomBlur = Math.floor(Math.random()*4)+2;
    choices.style.filter = `blur(${randomBlur}px)`;
    setTimeout(() => choices.style.filter = "", 300);
  }
}
setInterval(() => randomBlurShock(), Math.random()*2500 + 1500);

/* -------------------- ë‹¨ê³„ ë Œë”ë§ -------------------- */
function renderStep() {
  document.getElementById("stepTitle").innerText = stepsText[step];
  const box = document.getElementById("choices");
  box.innerHTML = "";
  box.classList.remove("hidden");
  document.getElementById("donationGroup").classList.add("hidden");

  let randomized = shuffle([...stageButtons[step]]);

  randomized.forEach(text => {
    let btn = document.createElement("button");
    btn.className = "choice-btn";
    btn.innerText = text;
   
    // ë²„íŠ¼ íšŒí”¼ íš¨ê³¼ (ëª¨ë°”ì¼ì—ì„œë„ ì‘ë™ ìœ ì§€, ë‹¨ 6ì—´ì´ë¼ ì–´ë ¤ì›€)
    btn.onmouseover = () => {
      // ë¸”ëŸ¬ ê°•ë„ ì•½í•˜ê²Œ
      if(window.matchMedia("(hover: hover)").matches) {
          btn.style.transform = `translate(${(Math.random()*30)-15}px, ${(Math.random()*30)-15}px)`;
          box.style.filter = `blur(${3 + Math.random()*2}px)`; // ì•½í•˜ê²Œ
      }
    };
    btn.onmouseout = () => {
      btn.style.transform = "translate(0,0)";
      box.style.filter = "";
    };
   
    btn.onclick = () => handleChoice(text);
    box.appendChild(btn);
  });
}

function handleChoice(val) {
  if (val !== correct[step]()) {
    showAd();
    resetGame();
    return;
  }
  step++;
  if (step === 8) {
    enterPaymentTrap();
    return;
  }
  renderStep();
}

/* -------------------- ê²°ì œ ë‹¨ê³„ íŠ¸ë© (ìˆ˜ì •ë¨) -------------------- */
function enterPaymentTrap() {
  document.getElementById("choices").classList.add("hidden");
  document.getElementById("stepTitle").innerText = "ê²°ì œ ì „ ì•ˆë‚´ (ì£¼ì˜!)";

  document.getElementById("donationGroup").classList.remove("hidden");
 
  const realPay = document.getElementById("finalRealPayBtn");
  realPay.classList.remove("hidden");

  // í•¨ì •(ê¸°ë¶€) ë²„íŠ¼ë“¤ ì²˜ë¦¬
  const traps = ["donationYesBtn", "donationNoBtn", "donation1000","donation3000","donation10000"];
  traps.forEach(id => {
    const btn = document.getElementById(id);
    btn.onclick = resetGame;
   
    // PCì—ì„œë§Œ ë„ë§ë‹¤ë‹ˆê²Œ í•¨ (ëª¨ë°”ì¼ ì˜¤í„°ì¹˜ ë°©ì§€)
    btn.onmouseover = () => {
       if(window.matchMedia("(hover: hover)").matches) {
          btn.style.transform = `translate(${(Math.random()*60)-30}px, ${(Math.random()*60)-30}px)`;
       }
    };
    btn.onmouseout = () => {
      btn.style.transform = "translate(0,0)";
    };
  });

  // [ìˆ˜ì •] ì§„ì§œ ê²°ì œ ë²„íŠ¼ ì´ë²¤íŠ¸ (ë‹¨ìˆœí™” ë° ê°•í™”)
  realPay.onclick = (e) => {
    e.stopPropagation(); // ì´ë²¤íŠ¸ ë²„ë¸”ë§ ë°©ì§€
    e.preventDefault();  // ê¸°ë³¸ ë™ì‘ ë°©ì§€

    clearInterval(timerInterval); // íƒ€ì´ë¨¸ ì¢…ë£Œ
   
    // UI ì •ë¦¬
    document.getElementById("kiosk").classList.add("hidden");
    realPay.classList.add("hidden");
    document.getElementById("adPopup").classList.add("hidden");
    document.getElementById("timer").classList.add("hidden");
    document.getElementById("mission").classList.add("hidden");
   
    // ì„±ê³µ í™”ë©´ í‘œì‹œ
    document.getElementById("successScreen").classList.remove("hidden");
  };
}

function startTimer() {
  timerInterval = setInterval(() => {
    time -= Math.floor(Math.random()*2)+1;
    if (time <= 0) {
        document.getElementById("timer").innerText = "0";
        alert("â›” ì‹œê°„ ì´ˆê³¼!");
        location.reload();
        clearInterval(timerInterval);
        return;
    }
    document.getElementById("timer").innerText = time;
  }, 1000);
}

document.getElementById("startBtn").onclick = () => {
  generateRecipe();
  document.getElementById("startBtn").classList.add("hidden");
  document.getElementById("kiosk").classList.remove("hidden");
  startTimer();
  renderStep();
  setTimeout(showAd, 2000);
};
</script>

</body>
</html>


