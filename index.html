<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
<title>ëœë¤ ë ˆì‹œí”¼ í‚¤ì˜¤ìŠ¤í¬</title>

<style>
  /* ---------------- ê¸°ë³¸ ì„¤ì • ---------------- */
  body {
    font-family: 'Pretendard', sans-serif;
    text-align: center;
    user-select: none;
    background: #ffffff;
    margin: 0;
    overflow-x: hidden;
    padding-bottom: 120px; /* í•˜ë‹¨ ê´‘ê³ /ë²„íŠ¼ ì˜ì—­ í™•ë³´ */
  }

  /* ---------------- ë°˜ì‘í˜• ê·¸ë¦¬ë“œ ë ˆì´ì•„ì›ƒ ---------------- */
  #choices {
    margin: 20px auto;
    width: 95%;
    max-width: 1400px;
    display: grid;
    grid-template-columns: repeat(6, 1fr);
    gap: 12px;
  }

  /* ëª¨ë°”ì¼ìš© ìŠ¤íƒ€ì¼ */
  @media (max-width: 768px) {
    #choices {
      grid-template-columns: repeat(2, 1fr);
      gap: 15px;
    }
   
    button.choice-btn {
      padding: 0 !important;
      font-size: 26px !important;
      min-height: 120px !important;
    }

    #title { font-size: 24px !important; }
    #recipeBox { width: 92% !important; font-size: 18px !important; }
  }

  #title {
    font-size: 32px;
    font-weight: 800;
    margin-top: 20px;
    color: #333;
  }

  #mission {
    font-size: 16px;
    margin-bottom: 15px;
    line-height: 1.6;
    color: #555;
  }

  #recipeBox {
    background: #eef7ff;
    padding: 20px;
    margin: 10px auto;
    width: 500px;
    border: 3px solid #91c4ff;
    border-radius: 15px;
    font-size: 20px;
    box-shadow: 0 6px 10px rgba(0,0,0,0.1);
  }

  #timer {
    font-size: 40px;
    color: #ff0000;
    font-weight: 900;
    margin: 15px;
    text-shadow: 2px 2px 0px rgba(0,0,0,0.1);
  }

  .hidden { display: none !important; }

  /* ---------------- ì• ë‹ˆë©”ì´ì…˜ ---------------- */
  .blurred {
    animation: blurPulse 2.2s infinite ease-in-out;
    filter: blur(3px);
  }

  @keyframes blurPulse {
    0%   { filter: blur(4px); }
    25%  { filter: blur(6px); }
    50% { filter: blur(4px); }
    75% { filter: blur(6px); }
    100% { filter: blur(4px); }
  }

  .shake {
    animation: shake 0.4s infinite alternate;
  }
  @keyframes shake {
    from { transform: translateX(-3px); }
    to   { transform: translateX(3px); }
  }

  /* ---------------- ë²„íŠ¼ ë””ìì¸ ---------------- */
  button.choice-btn {
    font-size: 22px;
    font-weight: 800;
    width: 100%;
    min-height: 100px;
    border: none;
    border-radius: 16px;
    background: linear-gradient(180deg, #ffffff 0%, #f0f0f0 100%);
    box-shadow: 0 6px 0 #b1b1b1, 0 4px 6px rgba(0,0,0,0.1);
    color: #222;
    cursor: pointer;
    transition: transform 0.1s, box-shadow 0.1s;
    word-break: keep-all;
    line-height: 1.2;
  }

  button.choice-btn:active {
    transform: translateY(6px) !important;
    box-shadow: 0 0 0 #b1b1b1 inset;
  }

  #startBtn {
    font-size: 24px;
    font-weight: bold;
    padding: 20px 60px;
    cursor: pointer;
    background: #44aa55;
    color: white;
    border: none;
    border-radius: 15px;
    margin-top: 30px;
    box-shadow: 0 6px 0 #2a7a35;
  }
  #startBtn:active { margin-top: 36px; box-shadow: none; }

  /* ê¸°ë¶€ ë²„íŠ¼ ìŠ¤íƒ€ì¼ */
  .donation-container {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 15px;
    width: 95%;
    margin: 0 auto;
    max-width: 500px;
  }

  .donation-btn {
    border: none;
    border-radius: 15px;
    padding: 25px;
    width: 100%;
    font-size: 24px;
    cursor: pointer;
    color: #333;
    box-shadow: 0 5px 0 rgba(0,0,0,0.2);
    font-weight: bold;
    filter: none;
    /* ì¤‘ìš”: ë§ˆìš°ìŠ¤ ì˜¬ë ¤ë„ ë¸”ëŸ¬ ì—†ìœ¼ë¯€ë¡œ ë³„ë„ íš¨ê³¼ X */
  }
  .donation-btn:active { transform: translateY(5px); box-shadow: none; }

  /* ê´‘ê³  íŒì—… (í•˜ë‹¨ ë°°ë„ˆ ìŠ¤íƒ€ì¼) */
  #adPopup {
    position: fixed;
    bottom: 0;
    left: 0;
    width: 100%;
    background: #ffec99;
    border-top: 4px solid #ff8800;
    padding: 15px 0;
    text-align: center;
    font-size: 18px;
    font-weight: bold;
    z-index: 9000; /* ê²°ì œ ë²„íŠ¼(10000)ë³´ë‹¤ëŠ” ì•„ë˜ */
    box-shadow: 0 -5px 15px rgba(0,0,0,0.2);
    display: flex;
    justify-content: center;
    align-items: center;
    gap: 10px;
  }

</style>
</head>

<body>

<div id="title">ëœë¤ ë ˆì‹œí”¼ í‚¤ì˜¤ìŠ¤í¬ â€“ HELL MODE</div>
<div id="mission">
ğŸ¯ <b>ë¯¸ì…˜</b>: ì œì‹œëœ ë ˆì‹œí”¼ë¥¼ 90ì´ˆ ì•ˆì— ì •í™•íˆ ì„ íƒí•˜ì‹œì˜¤.<br>
(í‹€ë¦¬ë©´ ì²˜ìŒìœ¼ë¡œ ëŒì•„ê°‘ë‹ˆë‹¤!)
</div>

<div id="recipeBox">
  <div style="margin-bottom:8px; color:#666; font-size:0.8em;">[ì˜¤ëŠ˜ì˜ ì£¼ë¬¸]</div>
  <div id="recipeText"></div>
</div>

<div id="timer">90</div>
<button id="startBtn">ì‹œì‘í•˜ê¸°</button>

<div id="kiosk" class="hidden">
  <h2 id="stepTitle" style="font-size:24px; margin:20px 0;"></h2>

  <div id="choices" class="blurred shake"></div>

  <div id="donationGroup" class="donation-container hidden">
    <button id="donationYesBtn" class="donation-btn shake" style="background:#ffb3b3; font-size: 28px;">â¤ï¸ ê¸°ë¶€í•˜ê¸°</button>
    <button id="donationNoBtn" class="donation-btn shake" style="background:#b3d9ff;">ê¸°ë¶€ ì•ˆí•˜ê¸°</button>
    <button id="donation1000" class="donation-btn shake" style="background:#ffe0e0;">1,000ì› ê¸°ë¶€</button>
    <button id="donation3000" class="donation-btn shake" style="background:#ffd1d1;">3,000ì› ê¸°ë¶€</button>
    <button id="donation10000" class="donation-btn shake" style="background:#ffb3b3;">10,000ì› ê¸°ë¶€</button>
  </div>
</div>

<div id="adPopup" class="hidden">
  <span>ğŸ“¢ <b>íŠ¹ë³„ í• ì¸!</b> ì§€ê¸ˆ ê°€ì…í•˜ë©´ <span style="color:red;">50%</span> í• ì¸!</span>
  <button id="adClose" style="
    background: red;
    color: white;
    border: none;
    border-radius: 5px;
    padding: 5px 10px;
    cursor: pointer;
    font-weight: bold;
    margin-left: 10px;
  ">ë‹«ê¸° X</button>
</div>

<button id="finalRealPayBtn" class="hidden"
  style="
    position: fixed;
    bottom: 80px; /* ê´‘ê³  ë°°ë„ˆ ë°”ë¡œ ìœ„ìª½ì— ìœ„ì¹˜í•˜ë„ë¡ ì¡°ì • */
    right: 20px;
    transform: scale(0.7);
    opacity: 1;
    filter: blur(1px);
    background: #FFFFFF;
    color: #808080;
    border: 3px solid #FFFFFF;
    padding: 15px 25px;
    font-size: 18px;
    z-index: 10000;
    border-radius: 12px;
    cursor: pointer;
  ">
  Payment
</button>

<script>
/* -------------------- ë©”ë‰´ ë°ì´í„° -------------------- */
const drinkOptions = [
  "ì•„ë©”ë¦¬ì¹´ë…¸","ì¹´í˜ë¼ë–¼","ë°”ë‹ë¼ë¼ë–¼","ì¹´ë¼ë©œë§ˆë¼ì•„ë˜",
  "ì¹´í‘¸ì¹˜ë…¸","ì½œë“œë¸Œë£¨","ì¹´ë¼ë©œë¼ë–¼",
  "ì´ˆì½”ë¼ë–¼","ê³ êµ¬ë§ˆë¼ë–¼","ë…¹ì°¨ë¼ë–¼",
  "ì–¼ê·¸ë ˆì´í‹°","ìºëª¨ë§ˆì¼í‹°","í˜í¼ë¯¼íŠ¸í‹°",
  "ìœ ìì°¨","ë ˆëª¬í‹°","ìëª½í‹°","í™ì°¨","ë…¹ì°¨"
];
const hotIced = ["HOT", "ICE"];
const sizes = ["Small", "Medium", "Large", "Venti"];
const shot = ["Extra shot", "ìƒ· ì¶”ê°€ ì—†ìŒ"];
const iceAmount = ["ì–¼ìŒ ë§ì´", "ì–¼ìŒ ì ê²Œ"];
const sugar = ["ì„¤íƒ• ë§ì´", "ì„¤íƒ• ì ê²Œ"];
const dineType = ["ë¨¹ê³ ê°€ê¸°", "í…Œì´í¬ì•„ì›ƒ"];

/* -------------------- ì •ë‹µ ë ˆì‹œí”¼ ëœë¤ ìƒì„± -------------------- */
let recipe = {};
function generateRecipe() {
  recipe = {
    drink: drinkOptions[Math.floor(Math.random()*drinkOptions.length)],
    temp:  hotIced[Math.floor(Math.random()*hotIced.length)],
    size:  sizes[Math.floor(Math.random()*sizes.length)],
    shot:  shot[Math.floor(Math.random()*shot.length)],
    ice:   iceAmount[Math.floor(Math.random()*iceAmount.length)],
    sugar: sugar[Math.floor(Math.random()*sugar.length)],
    dine:  dineType[Math.floor(Math.random()*dineType.length)]
  };
  document.getElementById("recipeText").innerHTML = `
    <span style="font-size:1.3em; color:#0055ff; font-weight:bold;">${recipe.drink}</span><br>
    ${recipe.temp} / ${recipe.size} / ${recipe.shot}<br>
    ${recipe.ice} / ${recipe.sugar}<br>
    <b style="color:#d32f2f;">${recipe.dine}</b>
  `;
}

/* -------------------- ë‹¨ê³„ ì •ë³´ -------------------- */
let step = 1;
let time = 90;
let timerInterval;

const correct = {
  1: () => recipe.drink,
  2: () => recipe.temp,
  3: () => recipe.size,
  4: () => recipe.shot,
  5: () => recipe.ice,
  6: () => recipe.sugar,
  7: () => recipe.dine
};

const stepsText = {
  1: "1ë‹¨ê³„: ìŒë£Œ ì„ íƒ",
  2: "2ë‹¨ê³„: HOT / ICE",
  3: "3ë‹¨ê³„: ì‚¬ì´ì¦ˆ ì„ íƒ",
  4: "4ë‹¨ê³„: ìƒ· ì¶”ê°€ ì—¬ë¶€",
  5: "5ë‹¨ê³„: ì–¼ìŒì–‘ ì„ íƒ",
  6: "6ë‹¨ê³„: ì„¤íƒ• ì–‘ ì„ íƒ",
  7: "7ë‹¨ê³„: ë¨¹ê³ ê°€ê¸° / í…Œì´í¬ì•„ì›ƒ"
};

const stageButtons = {
  1: drinkOptions,
  2: hotIced,
  3: sizes,
  4: shot,
  5: iceAmount,
  6: sugar,
  7: dineType
};

function shuffle(array) {
  return array.sort(() => Math.random() - 0.5);
}

/* -------------------- ì´ˆê¸°í™” -------------------- */
function resetGame() {
  alert("âš  ì˜ëª» ì„ íƒí–ˆìŠµë‹ˆë‹¤! ì²˜ìŒ ë‹¨ê³„ë¡œ ëŒì•„ê°‘ë‹ˆë‹¤.");
  step = 1;

  document.getElementById("adPopup").classList.add("hidden");
  document.getElementById("donationGroup").classList.add("hidden");
  document.getElementById("finalRealPayBtn").classList.add("hidden");
 
  document.getElementById("choices").classList.remove("hidden");
  document.getElementById("stepTitle").innerText = stepsText[1];
  document.getElementById("kiosk").style.filter = "";

  renderStep();
}

/* -------------------- ê´‘ê³  (í•˜ë‹¨ ë°°ë„ˆ) -------------------- */
function showAd() {
  const ad = document.getElementById("adPopup");
  ad.classList.remove("hidden");
 
  const close = document.getElementById("adClose");
  // ë‹«ê¸° ë²„íŠ¼ì€ ë°°ë„ˆ ì•ˆì— ì–Œì „íˆ ìˆìŒ
  close.onclick = () => ad.classList.add("hidden");

  // ê°€ë”ì”© ë‹¤ì‹œ ë‚˜íƒ€ë‚¨
  setTimeout(() => { if(Math.random() < 0.6) showAd(); }, 5000);
}

/* -------------------- ë¸”ëŸ¬ íš¨ê³¼ -------------------- */
function randomBlurShock() {
  const choices = document.getElementById("choices");
  if (!choices.classList.contains("hidden")) {
    let randomBlur = Math.floor(Math.random()*6)+2;
    choices.style.filter = `blur(${randomBlur}px)`;
    setTimeout(() => choices.style.filter = "", 300);
  }
}
setInterval(() => randomBlurShock(), Math.random()*2500 + 1500);

/* -------------------- ë‹¨ê³„ ë Œë”ë§ -------------------- */
function renderStep() {
  document.getElementById("stepTitle").innerText = stepsText[step];
  const box = document.getElementById("choices");
  box.innerHTML = "";
  box.classList.remove("hidden");
  document.getElementById("donationGroup").classList.add("hidden");

  let randomized = shuffle([...stageButtons[step]]);

  randomized.forEach(text => {
    let btn = document.createElement("button");
    btn.className = "choice-btn";
    btn.innerText = text;
   
    // ì¼ë°˜ ë©”ë‰´ ë²„íŠ¼ íšŒí”¼ íš¨ê³¼ëŠ” ìœ ì§€
    btn.onmouseover = () => {
      btn.style.transform = `translate(${(Math.random()*40)-20}px, ${(Math.random()*40)-20}px)`;
      box.style.filter = `blur(${2 + Math.random()*3}px)`;
    };
    btn.onmouseout = () => {
      btn.style.transform = "translate(0,0)";
      box.style.filter = "";
    };
   
    btn.onclick = () => handleChoice(text);
    box.appendChild(btn);
  });
}

function handleChoice(val) {
  if (val !== correct[step]()) {
    showAd();
    resetGame();
    return;
  }
  step++;
  if (step === 8) {
    enterPaymentTrap();
    return;
  }
  renderStep();
}

/* -------------------- ê²°ì œ ë‹¨ê³„ íŠ¸ë© -------------------- */
function enterPaymentTrap() {
  document.getElementById("choices").classList.add("hidden");
  document.getElementById("stepTitle").innerText = "ê²°ì œ ì „ ì•ˆë‚´ (ì£¼ì˜!)";

  document.getElementById("donationGroup").classList.remove("hidden");
  document.getElementById("finalRealPayBtn").classList.remove("hidden");

  // í•¨ì •(ê¸°ë¶€) ë²„íŠ¼ë“¤
  const traps = ["donationYesBtn", "donationNoBtn", "donation1000","donation3000","donation10000"];
  traps.forEach(id => {
    const btn = document.getElementById(id);
    btn.onclick = resetGame;
   
    // [ìˆ˜ì •] ë§ˆìš°ìŠ¤ ì˜¤ë²„ ì‹œ ë¸”ëŸ¬ íš¨ê³¼ ì œê±°
    // ë‹¨ìˆœíˆ ë²„íŠ¼ë§Œ ë„ë§ë‹¤ë‹ˆê³ , í™”ë©´ ë¸”ëŸ¬(kioskContainer.filter)ëŠ” ì ìš©í•˜ì§€ ì•ŠìŒ
    btn.onmouseover = () => {
      btn.style.transform = `translate(${(Math.random()*60)-30}px, ${(Math.random()*60)-30}px)`;
    };
    btn.onmouseout = () => {
      btn.style.transform = "translate(0,0)";
    };
  });

  // ì§„ì§œ ê²°ì œ
  const realPay = document.getElementById("finalRealPayBtn");
  realPay.onclick = () => {
    alert("ğŸ‰ ì¶•í•˜í•©ë‹ˆë‹¤! ë“œë””ì–´ ê²°ì œì— ì„±ê³µí•˜ì…¨ìŠµë‹ˆë‹¤!");
    location.reload();
  };
 
  // ì§„ì§œ ë²„íŠ¼ íë¦¼ íš¨ê³¼ëŠ” ìœ ì§€ (ì°¾ê¸° ì–´ë µê²Œ)
  realPay.onmouseover = () => {
    realPay.style.filter = "blur(5px)";
    realPay.style.transform = "scale(0.7) translate(-10px, -10px)";
  };
  realPay.onmouseout = () => {
    realPay.style.filter = "blur(5px)";
    realPay.style.transform = "scale(0.7)";
  };
}

function startTimer() {
  timerInterval = setInterval(() => {
    time -= Math.floor(Math.random()*2)+1;
    if (time <= 0) {
        document.getElementById("timer").innerText = "0";
        alert("â›” ì‹œê°„ ì´ˆê³¼!");
        location.reload();
        clearInterval(timerInterval);
        return;
    }
    document.getElementById("timer").innerText = time;
  }, 1000);
}

document.getElementById("startBtn").onclick = () => {
  generateRecipe();
  document.getElementById("startBtn").classList.add("hidden");
  document.getElementById("kiosk").classList.remove("hidden");
  startTimer();
  renderStep();
  setTimeout(showAd, 2000);
};
</script>

</body>
</html>
