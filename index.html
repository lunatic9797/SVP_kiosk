<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<title>ëœë¤ ë ˆì‹œí”¼ í‚¤ì˜¤ìŠ¤í¬ - HELL MODE</title>

<style>
  body { 
    font-family: sans-serif;
    text-align: center;
    user-select: none;
  }

  #title {
    font-size: 26px;
    font-weight: bold;
    margin-top: 15px;
  }

  #mission { font-size: 13px; }

  #recipeBox {
    background: #eef7ff;
    padding: 10px;
    margin: 10px auto;
    width: 300px;
    border: 1px solid #91c4ff;
    border-radius: 5px;
    font-size: 13px;
  }

  #timer {
    font-size: 22px;
    color: red;
    margin: 15px;
  }

  .hidden { display: none; }

  .blurred { filter: blur(2px); animation: blurPulse 2s infinite alternate; }
  @keyframes blurPulse {
    from { filter: blur(2px); }
    to { filter: blur(4px); }
  }

  .shake {
    animation: shake 0.4s infinite alternate;
  }
  @keyframes shake {
    from { transform: translateX(-2px); }
    to   { transform: translateX(2px); }
  }

  button {
    font-size: 9px;
    padding: 7px;
    margin: 4px;
    cursor: pointer;
  }

  #choices { margin-top: 10px; }

  /* ê´‘ê³  */
  #adPopup {
    position: absolute;
    top: 60px;
    left: 50%;
    transform: translateX(-50%);
    background: #ffec99;
    width: 240px;
    padding: 12px;
    border: 2px solid #ff8800;
    font-size: 12px;
    z-index: 9999;
  }
  #adClose {
    position: absolute;
    top: 1px;
    right: 4px;
    cursor: pointer;
    font-size: 10px;
  }
</style>
</head>

<body>

<div id="title">ëœë¤ ë ˆì‹œí”¼ í‚¤ì˜¤ìŠ¤í¬ â€“ HELL MODE</div>
<div id="mission">
ğŸ¯ <b>ë¯¸ì…˜</b>: ì œì‹œëœ ë ˆì‹œí”¼ë¥¼ 60ì´ˆ ì•ˆì— ì •í™•í•˜ê²Œ ì„ íƒí•˜ì‹œì˜¤.<br>
âš  í‹€ë¦¬ë©´ ì¦‰ì‹œ ì´ˆê¸°í™”ë©ë‹ˆë‹¤. ëª¨ë“  ë²„íŠ¼ ì¤‘ í•¨ì •ì´ ì¡´ì¬í•©ë‹ˆë‹¤.
</div>

<div id="recipeBox">
  <div><b>[ì˜¤ëŠ˜ì˜ ì£¼ë¬¸]</b></div>
  <div id="recipeText"></div>
</div>

<div id="timer">60</div>
<button id="startBtn">ì‹œì‘í•˜ê¸°</button>

<div id="kiosk" class="hidden">
  <h2 id="stepTitle"></h2>
  <div id="choices" class="blurred shake"></div>

  <!-- ê´‘ê³  -->
  <div id="adPopup" class="hidden blurred shake">
    ğŸ“¢ íŠ¹ë³„ í• ì¸! ì§€ê¸ˆ ê°€ì…í•˜ë©´ 50% í• ì¸!
    <span id="adClose">X</span>
  </div>

  <!-- ê²°ì œ -->
  <button id="fakePayBtn" class="hidden blurred shake">ê²°ì œí•˜ê¸°</button>
  <button id="realPayBtn" class="hidden">â–¶ ì§„ì§œ ê²°ì œ ë²„íŠ¼(0.6ì´ˆ)</button>
</div>


<script>
/* -------------------- ë©”ë‰´ ë°ì´í„° -------------------- */
const drinkOptions = [
  "ì•„ë©”ë¦¬ì¹´ë…¸", "ì¹´í˜ë¼ë–¼", "ë°”ë‹ë¼ë¼ë–¼", "ì¹´ë¼ë©œë§ˆë¼ì•„ë˜",
  "ì¹´í‘¸ì¹˜ë…¸", "ì½œë“œë¸Œë£¨", "ì¹´ë¼ë©œë¼ë–¼",
  "ì´ˆì½”ë¼ë–¼", "ê³ êµ¬ë§ˆë¼ë–¼", "ë…¹ì°¨ë¼ë–¼",
  "ì–¼ê·¸ë ˆì´í‹°", "ìºëª¨ë§ˆì¼í‹°", "í˜í¼ë¯¼íŠ¸í‹°",
  "ìœ ìì°¨", "ë ˆëª¬í‹°", "ìëª½í‹°", "í™ì°¨", "ë…¹ì°¨"
];

const hotIced = ["HOT", "ICE"];

// ğŸ”¥ Venti ì¶”ê°€
const sizes = ["Small", "Medium", "Large", "Venti"];

const shot = ["Extra shot", "ìƒ· ì¶”ê°€ ì—†ìŒ"];
const iceAmount = ["ì–¼ìŒ ë§ì´", "ì–¼ìŒ ì ê²Œ"];
const sugar = ["ì„¤íƒ• ë§ì´", "ì„¤íƒ• ì ê²Œ"];
const dineType = ["ë¨¹ê³ ê°€ê¸°", "í…Œì´í¬ì•„ì›ƒ"];

/* -------------------- ì •ë‹µ ë ˆì‹œí”¼ ëœë¤ ìƒì„± -------------------- */
let recipe = {};

function generateRecipe() {
  recipe = {
    drink: drinkOptions[Math.floor(Math.random() * drinkOptions.length)],
    temp: hotIced[Math.floor(Math.random() * hotIced.length)],
    size: sizes[Math.floor(Math.random() * sizes.length)],
    shot: shot[Math.floor(Math.random() * shot.length)],
    ice: iceAmount[Math.floor(Math.random() * iceAmount.length)],
    sugar: sugar[Math.floor(Math.random() * sugar.length)],
    dine: dineType[Math.floor(Math.random() * dineType.length)]
  };

  document.getElementById("recipeText").innerHTML = `
  ${recipe.drink} / ${recipe.temp} / ${recipe.size}<br>
  ${recipe.shot} / ${recipe.ice} / ${recipe.sugar}<br>
  ${recipe.dine}
  `;
}

/* -------------------- ë‹¨ê³„ ì„¤ì • -------------------- */
let step = 1;
let time = 60;
let timerInterval;

// ì •ë‹µ ë§¤ì¹­ í•¨ìˆ˜
const correct = {
  1: () => recipe.drink,
  2: () => recipe.temp,
  3: () => recipe.size,
  4: () => recipe.shot,
  5: () => recipe.ice,
  6: () => recipe.sugar,
  7: () => recipe.dine
};

const stepsText = {
  1: "1ë‹¨ê³„: ìŒë£Œ ì„ íƒ",
  2: "2ë‹¨ê³„: HOT / ICE",
  3: "3ë‹¨ê³„: ì‚¬ì´ì¦ˆ ì„ íƒ",
  4: "4ë‹¨ê³„: ìƒ· ì¶”ê°€ ì—¬ë¶€",
  5: "5ë‹¨ê³„: ì–¼ìŒì–‘ ì„ íƒ",
  6: "6ë‹¨ê³„: ì„¤íƒ• ì–‘ ì„ íƒ",
  7: "7ë‹¨ê³„: ë¨¹ê³ ê°€ê¸° / í…Œì´í¬ì•„ì›ƒ"
};

const stageButtons = {
  1: drinkOptions,
  2: hotIced,
  3: sizes,
  4: shot,
  5: iceAmount,
  6: sugar,
  7: dineType
};

/* -------------------- ë²„íŠ¼ ë°°ì—´ ì…”í”Œ -------------------- */
function shuffle(array) {
  return array.sort(() => Math.random() - 0.5);
}

/* -------------------- ì´ˆê¸°í™” -------------------- */
function resetGame() {
  alert("âš  ì˜ëª» ì„ íƒí–ˆìŠµë‹ˆë‹¤! ì²˜ìŒìœ¼ë¡œ ëŒì•„ê°‘ë‹ˆë‹¤.");
  step = 1;
  renderStep();
}

/* -------------------- ê´‘ê³  -------------------- */
function showAd() {
  let ad = document.getElementById("adPopup");
  ad.classList.remove("hidden");

  const close = document.getElementById("adClose");

  close.onmouseover = () => {
    close.style.top = (Math.random() * 20) + "px";
    close.style.right = (Math.random() * 20) + "px";
  };

  close.onclick = () => ad.classList.add("hidden");

  setTimeout(() => {
    if (Math.random() < 0.6) showAd();
  }, 3000);
}

/* -------------------- ë‹¨ê³„ í™”ë©´ í‘œì‹œ -------------------- */
function renderStep() {
  document.getElementById("stepTitle").innerText = stepsText[step];

  const box = document.getElementById("choices");
  box.innerHTML = "";

  // ğŸ”¥ ë²„íŠ¼ ìˆœì„œë¥¼ ëœë¤ìœ¼ë¡œ ì„ìŒ
  let randomized = shuffle([...stageButtons[step]]);

  randomized.forEach(text => {
    let btn = document.createElement("button");
    btn.innerText = text;

    // ë²„íŠ¼ ë„ë§ ì•Œê³ ë¦¬ì¦˜
    btn.onmouseover = () => {
      btn.style.transform =
        `translate(${(Math.random()*60)-30}px, ${(Math.random()*60)-30}px)`;
    };

    btn.onclick = () => handleChoice(text);

    box.appendChild(btn);
  });
}

/* -------------------- ì„ íƒ ì²˜ë¦¬ -------------------- */
function handleChoice(val) {
  if (val !== correct[step]()) {
    showAd();
    resetGame();
    return;
  }

  step++;

  if (step === 8) {
    enterPayment();
    return;
  }

  renderStep();
}

/* -------------------- ê²°ì œ ë‹¨ê³„ -------------------- */
function enterPayment() {
  document.getElementById("choices").classList.add("hidden");
  document.getElementById("fakePayBtn").classList.remove("hidden");
  document.getElementById("stepTitle").innerText = "ìµœì¢… ê²°ì œ ë‹¨ê³„";

  document.getElementById("fakePayBtn").onclick = () => {
    alert("ê²°ì œ ì˜¤ë¥˜! ë‹¤ì‹œ ì‹œë„í•˜ì„¸ìš”.");
    let realBtn = document.getElementById("realPayBtn");
    realBtn.classList.remove("hidden");

    setTimeout(() => realBtn.classList.add("hidden"), 600);
  };

  document.getElementById("realPayBtn").onclick = () => {
    alert("ğŸ‰ ì„±ê³µ! ëœë¤ ë ˆì‹œí”¼ë¥¼ ì •í™•íˆ ì„ íƒí–ˆìŠµë‹ˆë‹¤!");
    location.reload();
  };
}

/* -------------------- íƒ€ì´ë¨¸ -------------------- */
function startTimer() {
  timerInterval = setInterval(() => {
    time -= Math.floor(Math.random()*3)+1;
    if (time <= 0) {
      alert("â›” ì‹œê°„ ì´ˆê³¼!");
      location.reload();
    }
    document.getElementById("timer").innerText = time;
  }, 1000);
}

/* -------------------- ì‹œì‘ ë²„íŠ¼ -------------------- */
document.getElementById("startBtn").onclick = () => {
  generateRecipe();
  document.getElementById("startBtn").classList.add("hidden");
  document.getElementById("kiosk").classList.remove("hidden");
  startTimer();
  renderStep();
  setTimeout(showAd, 3000);
};
</script>

</body>
</html>
