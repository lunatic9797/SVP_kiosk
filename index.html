<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
<title>SSDA ì»¤í”¼ í‚¤ì˜¤ìŠ¤í¬</title>

<style>
  /* ---------------- ê¸°ë³¸ ì„¤ì • ---------------- */
  body {
    font-family: 'Pretendard', sans-serif;
    text-align: center;
    user-select: none;
    background: #ffffff;
    margin: 0;
    overflow-x: hidden;
    padding-bottom: 120px;
  }

  /* ---------------- ë°˜ì‘í˜• ê·¸ë¦¬ë“œ ë ˆì´ì•„ì›ƒ ---------------- */
  #choices {
    margin: 20px auto;
    width: 98%; /* ì¢Œìš° ì—¬ë°±ì„ ìµœì†Œí™”í•´ì„œ ë²„íŠ¼ ê³µê°„ í™•ë³´ */
    max-width: 1400px;
   
    display: grid;
    /* [í•µì‹¬] ë¬´ì¡°ê±´ ê°€ë¡œ 6ê°œ ê³ ì • (ëª¨ë°”ì¼ì—ì„œë„ ì•ˆ ë°”ë€œ) */
    grid-template-columns: repeat(6, 1fr);
    gap: 4px; /* ë²„íŠ¼ ê°„ê²©ì„ ì¢í˜€ì„œ ê³µê°„ í™•ë³´ */
  }

  /* ëª¨ë°”ì¼ìš© ìŠ¤íƒ€ì¼ (í™”ë©´ ë„ˆë¹„ 768px ì´í•˜) */
  @media (max-width: 768px) {
    /* [ìˆ˜ì •ë¨] ì—¬ê¸°ì„œ grid-template-columnsë¥¼ 2ê°œë¡œ ë°”ê¾¸ë˜ ì½”ë“œë¥¼ ì‚­ì œí–ˆìŠµë‹ˆë‹¤.
      ì´ì œ ëª¨ë°”ì¼ì—ì„œë„ ìœ„ì—ì„œ ì„¤ì •í•œ 6ê°œê°€ ê·¸ëŒ€ë¡œ ì ìš©ë©ë‹ˆë‹¤.
    */
   
    button.choice-btn {
      padding: 5px 2px !important; /* ë‚´ë¶€ ì—¬ë°± ìµœì†Œí™” */
      font-size: 11px !important;  /* 6ê°œì”© ë„£ìœ¼ë ¤ë©´ ê¸€ì”¨ê°€ ì‘ì•„ì•¼ í•¨ */
      min-height: 60px !important; /* ë†’ì´ëŠ” ì ë‹¹íˆ ìœ ì§€ */
      letter-spacing: -1px;        /* ìê°„ì„ ì¢í˜€ì„œ ê¸´ ë‹¨ì–´ ìš±ì—¬ë„£ê¸° */
      line-height: 1.1;
    }

    #title { font-size: 20px !important; }
    #recipeBox { width: 95% !important; font-size: 14px !important; }
   
    /* íƒ€ì´ë¨¸ í¬ê¸° ì¡°ì • */
    #timer { font-size: 30px !important; }
  }

  #title {
    font-size: 32px;
    font-weight: 800;
    margin-top: 20px;
    color: #333;
  }

  #mission {
    font-size: 14px;
    margin-bottom: 10px;
    color: #555;
  }

  #recipeBox {
    background: #eef7ff;
    padding: 15px;
    margin: 10px auto;
    width: 500px;
    border: 3px solid #91c4ff;
    border-radius: 15px;
    font-size: 20px;
    box-shadow: 0 6px 10px rgba(0,0,0,0.1);
  }

  #timer {
    font-size: 40px;
    color: #ff0000;
    font-weight: 900;
    margin: 15px;
  }

  .hidden { display: none !important; }

  /* ---------------- ì• ë‹ˆë©”ì´ì…˜ ---------------- */
  .blurred {
    animation: blurPulse 2.2s infinite ease-in-out;
    filter: blur(3px);
  }

  @keyframes blurPulse {
    0%   { filter: blur(3px); }
    25%   { filter: blur(5px); }
    50%  { filter: blur(3px); }
    75%   { filter: blur(4px); }
    100% { filter: blur(3px); }
  }

  .shake {
    animation: shake 0.4s infinite alternate;
  }
  @keyframes shake {
    from { transform: translateX(-3px); }
    to   { transform: translateX(3px); }
  }

  /* ---------------- ë²„íŠ¼ ë””ìì¸ ---------------- */
  button.choice-btn {
    font-size: 18px;
    font-weight: 800;
    width: 100%;
    min-height: 80px;
    border: none;
    border-radius: 8px; /* ë‘¥ê·¼ ëª¨ì„œë¦¬ ì•½ê°„ ì¤„ì„ */
    background: linear-gradient(180deg, #ffffff 0%, #f0f0f0 100%);
    box-shadow: 0 4px 0 #b1b1b1, 0 2px 4px rgba(0,0,0,0.1);
    color: #222;
    cursor: pointer;
    transition: transform 0.1s, box-shadow 0.1s;
    word-break: keep-all; /* ë‹¨ì–´ ë‹¨ìœ„ ì¤„ë°”ê¿ˆ ì‹œë„ */
    display: flex;        /* ê¸€ì ìˆ˜ì§ ì¤‘ì•™ ì •ë ¬ */
    align-items: center;
    justify-content: center;
  }

  button.choice-btn:active {
    transform: translateY(4px) !important;
    box-shadow: 0 0 0 #b1b1b1 inset;
  }

  #startBtn {
    font-size: 24px;
    font-weight: bold;
    padding: 15px 40px;
    cursor: pointer;
    background: #44aa55;
    color: white;
    border: none;
    border-radius: 15px;
    margin-top: 20px;
    box-shadow: 0 6px 0 #2a7a35;
  }
  #startBtn:active { margin-top: 26px; box-shadow: none; }

  /* ê¸°ë¶€ ë²„íŠ¼ ìŠ¤íƒ€ì¼ */
  .donation-container {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 10px;
    width: 95%;
    margin: 0 auto;
    max-width: 500px;
  }

  .donation-btn {
    border: none;
    border-radius: 10px;
    padding: 15px;
    width: 100%;
    font-size: 20px;
    cursor: pointer;
    color: #333;
    box-shadow: 0 4px 0 rgba(0,0,0,0.2);
    font-weight: bold;
    filter: none;
  }
  .donation-btn:active { transform: translateY(4px); box-shadow: none; }

  /* ê´‘ê³  íŒì—… (í•˜ë‹¨ ë°°ë„ˆ ìŠ¤íƒ€ì¼) */
  #adPopup {
    position: fixed;
    bottom: 0;
    left: 0;
    width: 100%;
    background: #ffec99;
    border-top: 4px solid #ff8800;
    padding: 12px 0;
    text-align: center;
    font-size: 14px;
    font-weight: bold;
    z-index: 9000;
    box-shadow: 0 -5px 15px rgba(0,0,0,0.2);
    display: flex;
    justify-content: center;
    align-items: center;
    gap: 10px;
  }

</style>
</head>

<body>

<div id="title">ëœë¤ ë ˆì‹œí”¼ í‚¤ì˜¤ìŠ¤í¬<br><span style="color:red; font-size:0.8em;"></span></div>
<div id="mission">
ğŸ¯ <b>ë¯¸ì…˜</b>: ì œì‹œëœ ë ˆì‹œí”¼ë¥¼ 90ì´ˆ ì•ˆì— ì •í™•íˆ ì„ íƒí•˜ì‹œì˜¤.<br>
(í‹€ë¦¬ë©´ ì²˜ìŒìœ¼ë¡œ ëŒì•„ê°‘ë‹ˆë‹¤!)
</div>

<div id="recipeBox">
  <div style="margin-bottom:5px; color:#666; font-size:0.8em;">[ì˜¤ëŠ˜ì˜ ì£¼ë¬¸]</div>
  <div id="recipeText"></div>
</div>

<div id="timer">90</div>
<button id="startBtn">ì‹œì‘í•˜ê¸°</button>

<div id="kiosk" class="hidden">
  <h2 id="stepTitle" style="font-size:20px; margin:15px 0;"></h2>

  <div id="choices" class="blurred shake"></div>

  <div id="donationGroup" class="donation-container hidden">
    <button id="donationYesBtn" class="donation-btn shake" style="background:#ffb3b3; font-size: 24px;">â¤ï¸ ê¸°ë¶€í•˜ê¸°</button>
    <button id="donation1000" class="donation-btn shake" style="background:#ffe0e0;">1,000ì› ê¸°ë¶€</button>
    <button id="donation3000" class="donation-btn shake" style="background:#ffd1d1;">3,000ì› ê¸°ë¶€</button>
    <button id="donation10000" class="donation-btn shake" style="background:#ffb3b3;">10,000ì› ê¸°ë¶€</button>
  </div>
</div>

<div id="adPopup" class="hidden">
  <span>ğŸ“¢ <b>í• ì¸!</b> ê°€ì… ì‹œ <span style="color:red;">50%</span>â†“</span>
  <button id="adClose" style="
    background: red;
    color: white;
    border: none;
    border-radius: 5px;
    padding: 3px 8px;
    cursor: pointer;
    font-weight: bold;
    font-size: 12px;
  ">ë‹«ê¸°</button>
</div>

<button id="finalRealPayBtn" class="hidden"
  style="
    position: fixed;
    bottom: 60px; /* ê´‘ê³  ë°°ë„ˆ ë°”ë¡œ ìœ„ */
    right: 15px;
    transform: scale(0.7);
    opacity: 0.8;
    filter: blur(3px);
    background: #FFFFFF;
    color: #000;
    border: 2px solid #FFFFFF;
    padding: 10px 15px;
    font-size: 15px;
    z-index: 10000;
    border-radius: 8px;
    cursor: pointer;
  ">
  ì§„ì§œ ê²°ì œ
</button>

<script>
/* -------------------- ë©”ë‰´ ë°ì´í„° -------------------- */
const drinkOptions = [
  "ì•„ë©”ë¦¬ì¹´ë…¸","ì¹´í˜ë¼ë–¼","ë°”ë‹ë¼ë¼ë–¼","ì¹´ë¼ë©œë§ˆë¼ì•„ë˜",
  "ì¹´í‘¸ì¹˜ë…¸","ì½œë“œë¸Œë£¨","ì¹´ë¼ë©œë¼ë–¼",
  "ì´ˆì½”ë¼ë–¼","ê³ êµ¬ë§ˆë¼ë–¼","ë…¹ì°¨ë¼ë–¼",
  "ì–¼ê·¸ë ˆì´í‹°","ìºëª¨ë§ˆì¼í‹°","í˜í¼ë¯¼íŠ¸í‹°",
  "ìœ ìì°¨","ë ˆëª¬í‹°","ìëª½í‹°","í™ì°¨","ë…¹ì°¨"
];
const hotIced = ["HOT", "ICE"];
const sizes = ["Small", "Medium", "Large", "Venti"];
const shot = ["Extra shot", "ìƒ· ì¶”ê°€ ì—†ìŒ"];
const iceAmount = ["ì–¼ìŒ ë§ì´", "ì–¼ìŒ ì ê²Œ"];
const sugar = ["ì„¤íƒ• ë§ì´", "ì„¤íƒ• ì ê²Œ"];
const dineType = ["ë¨¹ê³ ê°€ê¸°", "í…Œì´í¬ì•„ì›ƒ"];

/* -------------------- ì •ë‹µ ë ˆì‹œí”¼ ëœë¤ ìƒì„± -------------------- */
let recipe = {};
function generateRecipe() {
  recipe = {
    drink: drinkOptions[Math.floor(Math.random()*drinkOptions.length)],
    temp:  hotIced[Math.floor(Math.random()*hotIced.length)],
    size:  sizes[Math.floor(Math.random()*sizes.length)],
    shot:  shot[Math.floor(Math.random()*shot.length)],
    ice:   iceAmount[Math.floor(Math.random()*iceAmount.length)],
    sugar: sugar[Math.floor(Math.random()*sugar.length)],
    dine:  dineType[Math.floor(Math.random()*dineType.length)]
  };
  document.getElementById("recipeText").innerHTML = `
    <span style="font-size:1.2em; color:#0055ff; font-weight:bold;">${recipe.drink}</span><br>
    ${recipe.temp} / ${recipe.size} / ${recipe.shot}<br>
    ${recipe.ice} / ${recipe.sugar}<br>
    <b style="color:#d32f2f;">${recipe.dine}</b>
  `;
}

/* -------------------- ë‹¨ê³„ ì •ë³´ -------------------- */
let step = 1;
let time = 90;
let timerInterval;

const correct = {
  1: () => recipe.drink,
  2: () => recipe.temp,
  3: () => recipe.size,
  4: () => recipe.shot,
  5: () => recipe.ice,
  6: () => recipe.sugar,
  7: () => recipe.dine
};

const stepsText = {
  1: "1ë‹¨ê³„: ìŒë£Œ ì„ íƒ",
  2: "2ë‹¨ê³„: HOT / ICE",
  3: "3ë‹¨ê³„: ì‚¬ì´ì¦ˆ ì„ íƒ",
  4: "4ë‹¨ê³„: ìƒ· ì¶”ê°€ ì—¬ë¶€",
  5: "5ë‹¨ê³„: ì–¼ìŒì–‘ ì„ íƒ",
  6: "6ë‹¨ê³„: ì„¤íƒ• ì–‘ ì„ íƒ",
  7: "7ë‹¨ê³„: ë¨¹ê³ ê°€ê¸° / í…Œì´í¬ì•„ì›ƒ"
};

const stageButtons = {
  1: drinkOptions,
  2: hotIced,
  3: sizes,
  4: shot,
  5: iceAmount,
  6: sugar,
  7: dineType
};

function shuffle(array) {
  return array.sort(() => Math.random() - 0.5);
}

/* -------------------- ì´ˆê¸°í™” -------------------- */
function resetGame() {
  alert("âš  ì˜ëª» ì„ íƒí–ˆìŠµë‹ˆë‹¤! ì²˜ìŒ ë‹¨ê³„ë¡œ ëŒì•„ê°‘ë‹ˆë‹¤.");
  step = 1;

  document.getElementById("adPopup").classList.add("hidden");
  document.getElementById("donationGroup").classList.add("hidden");
  document.getElementById("finalRealPayBtn").classList.add("hidden");
 
  document.getElementById("choices").classList.remove("hidden");
  document.getElementById("stepTitle").innerText = stepsText[1];
  document.getElementById("kiosk").style.filter = "";

  renderStep();
}

/* -------------------- ê´‘ê³  -------------------- */
function showAd() {
  const ad = document.getElementById("adPopup");
  ad.classList.remove("hidden");
 
  const close = document.getElementById("adClose");
  close.onclick = () => ad.classList.add("hidden");

  setTimeout(() => { if(Math.random() < 0.6) showAd(); }, 5000);
}

/* -------------------- ë¸”ëŸ¬ íš¨ê³¼ -------------------- */
function randomBlurShock() {
  const choices = document.getElementById("choices");
  if (!choices.classList.contains("hidden")) {
    let randomBlur = Math.floor(Math.random()*6)+2;
    choices.style.filter = `blur(${randomBlur}px)`;
    setTimeout(() => choices.style.filter = "", 300);
  }
}
setInterval(() => randomBlurShock(), Math.random()*2500 + 1500);

/* -------------------- ë‹¨ê³„ ë Œë”ë§ -------------------- */
function renderStep() {
  document.getElementById("stepTitle").innerText = stepsText[step];
  const box = document.getElementById("choices");
  box.innerHTML = "";
  box.classList.remove("hidden");
  document.getElementById("donationGroup").classList.add("hidden");

  let randomized = shuffle([...stageButtons[step]]);

  randomized.forEach(text => {
    let btn = document.createElement("button");
    btn.className = "choice-btn";
    btn.innerText = text;
   
    // ë²„íŠ¼ íšŒí”¼ íš¨ê³¼ (ëª¨ë°”ì¼ì—ì„œ 6ê°œì¼ ë•Œ ë” ì–´ë ¤ì›Œì§)
    btn.onmouseover = () => {
      btn.style.transform = `translate(${(Math.random()*30)-15}px, ${(Math.random()*30)-15}px)`;
      box.style.filter = `blur(${2 + Math.random()*3}px)`;
    };
    btn.onmouseout = () => {
      btn.style.transform = "translate(0,0)";
      box.style.filter = "";
    };
   
    btn.onclick = () => handleChoice(text);
    box.appendChild(btn);
  });
}

function handleChoice(val) {
  if (val !== correct[step]()) {
    showAd();
    resetGame();
    return;
  }
  step++;
  if (step === 8) {
    enterPaymentTrap();
    return;
  }
  renderStep();
}

/* -------------------- ê²°ì œ ë‹¨ê³„ íŠ¸ë© -------------------- */
function enterPaymentTrap() {
  document.getElementById("choices").classList.add("hidden");
  document.getElementById("stepTitle").innerText = "ê²°ì œ ì „ ì•ˆë‚´ (ì£¼ì˜!)";

  document.getElementById("donationGroup").classList.remove("hidden");
  document.getElementById("finalRealPayBtn").classList.remove("hidden");

  const traps = ["donationYesBtn", "donationNoBtn", "donation1000","donation3000","donation10000"];
  traps.forEach(id => {
    const btn = document.getElementById(id);
    btn.onclick = resetGame;
    btn.onmouseover = () => {
      btn.style.transform = `translate(${(Math.random()*60)-30}px, ${(Math.random()*60)-30}px)`;
    };
    btn.onmouseout = () => {
      btn.style.transform = "translate(0,0)";
    };
  });

  /* -------------------- [í•µì‹¬ ìˆ˜ì •] ì„±ê³µ ë¡œì§ í•¸ë“¤ëŸ¬ -------------------- */
  const realPay = document.getElementById("finalRealPayBtn");

  // ì„±ê³µ ì²˜ë¦¬ í•¨ìˆ˜
  const handleSuccess = (e) => {
    // ì´ë²¤íŠ¸ ì „íŒŒ ë°©ì§€ (ì¤‘ë³µ ì‹¤í–‰ ë°©ì§€)
    if(e) e.preventDefault();
   
    clearInterval(timerInterval);
    document.getElementById("kiosk").classList.add("hidden");
    document.getElementById("finalRealPayBtn").classList.add("hidden");
    document.getElementById("adPopup").classList.add("hidden");
    document.getElementById("timer").classList.add("hidden");
    document.getElementById("mission").classList.add("hidden");
   
    document.getElementById("successScreen").classList.remove("hidden");
  };

  // 1. PCìš© í´ë¦­ ì´ë²¤íŠ¸
  realPay.onclick = handleSuccess;
 
  // 2. ëª¨ë°”ì¼ìš© í„°ì¹˜ ì´ë²¤íŠ¸ (ì¤‘ìš”: ë²„íŠ¼ì´ ë„ë§ê°€ê¸° ì „ì— ì¡ìŒ)
  realPay.ontouchend = handleSuccess;
 
  // PCìš© ë§ˆìš°ìŠ¤ íšŒí”¼ íš¨ê³¼ (ëª¨ë°”ì¼ì—ì„œëŠ” ë¬´ì‹œë¨)
  realPay.onmouseover = () => {
    // ëª¨ë°”ì¼ì´ ì•„ë‹ ë•Œë§Œ íš¨ê³¼ ì ìš©
    if (!('ontouchstart' in window)) {
        realPay.style.filter = "blur(10px)";
        realPay.style.transform = "scale(0.7) translate(-10px, -10px)";
    }
  };
  realPay.onmouseout = () => {
    if (!('ontouchstart' in window)) {
        realPay.style.filter = "blur(5px)";
        realPay.style.transform = "scale(0.7)";
    }
  };
}


function startTimer() {
  timerInterval = setInterval(() => {
    time -= Math.floor(Math.random()*2)+1;
    if (time <= 0) {
        document.getElementById("timer").innerText = "0";
        alert("â›” ì‹œê°„ ì´ˆê³¼!");
        location.reload();
        clearInterval(timerInterval);
        return;
    }
    document.getElementById("timer").innerText = time;
  }, 1000);
}

document.getElementById("startBtn").onclick = () => {
  generateRecipe();
  document.getElementById("startBtn").classList.add("hidden");
  document.getElementById("kiosk").classList.remove("hidden");
  startTimer();
  renderStep();
  setTimeout(showAd, 2000);
};
</script>

</body>
</html>


